# Assesment

## Belangrijkste functionaliteiten:
1. De belangrijkste functie van mijn webapplicatie is dat wanneer er wordt ingelogd, alle geplaatste bets worden gesynchroniseerd en er wordt gekeken of de wedstrijd is gespeeld. Aan de hand daarvan wordt de geplaatste bet verwijderd en overgezet naar de history en wordt het eventueel gewonnen geld uitbetaald. Om dit voor elkaar te krijgen wordt er per bet een custom request gedaan om informatie te verkrijgen over de geplaatste bet. Dit houdt ook in dat het programma controleert wat de huidige tijd is, en op basis daarvan checkt welke requests moeten worden gedaan om de juiste informatie te verkrijgen. Wanneer de wedstrijd nog niet af is, wordt er nog niks met de geplaatste bet gedaan. Wanneer er wordt gesynchroniseerd binnen de eerste 4 uur dat de wedstrijd is afgelopen, wordt er naar de wedstrijd gezocht in de live-info data. Wanneer er wordt gesynchroniseerd na de eerste 4 uur dat de wedstrijd is afgelopen, wordt er gezocht in de history-data om informatie over de desbetreffende wedstrijd op te halen.

2. De odds die op de homepagina staan, zijn niet zomaar overgenomen, maar worden berekend op basis van de stand in de competitie van de spelende teams. Wederom worden de requests voor aankomende wedstrijden en de stand aangevraagd, en deze worden samengevoegd in één dictionary. In de calculate_odds functie wordt aan de hand van de 'probability to win' voor een team de odds berekend. Deze odds zullen op zich weer bepalen hoeveel een gebruiker wordt uitbetaald wanneer hij/zij een wedstrijd goed heeft voorspeld.

3. Door mijn eigen kleine database te creeëren in competitions.csv en deze te importeren naar mijn eigen database, is het mogelijk om op wedstrijden uit veel competities te wedden. Doordat bijna alle API-requests ongeveer hetzelfde zijn, is het mogelijk om precies de data op de vragen waar je naar zoekt. In de praktijk houdt dit in, dat wanneer er gezocht wordt naar een competitie en een overeenkomende competitie wordt gevonden, dit wordt omgezet naar een id en dit id wordt ingevuld in de request. Op deze manier wordt de juiste request gedaan. Omdat alle requests op dezelfde manier zijn gestructureerd is het mogelijk om voor elke competitie de juiste informatie te filteren en door sturen naar de html.

## Beslissingen
1. De eerste grote beslissing die ik moest nemen ging over het niet kunnen voltooien van mijn oorspronkelijke idee. In eerste instantie was het plan dat ik het mogelijk wilde maken om te wedden op amateur wedstrijden in plaats van proffesioneel voetbal. Nadat ik er achter kwam dat de data die nodig was om dit te maken niet gratis was te verkrijgen, heb ik besloten dat het op mijn website alleen mogelijk ging zijn om te wedden op proffesioneel voetbal. Uiteindelijk heb ik mijn oorspronkelijke idee uitgewerkt, maar daarbij heb ik gebruik gemaakt van een andere database. 

2. Ik heb besloten om de data uit de requests toe te voegen in een grote dictionary 'match-info' en hier een globale variable van te maken. Dit heb ik gedaan omdat het op die manier mogelijk was om vanuit verschillende functies te werken met die dictionary. 

3. Ik heb een helpers.py aangemaakt om alle requests aan te vragen en op de juiste manier in een dictionary te zetten. Dit heeft er voor gezorgt dat mijn app.py iets overzichtelijker is gebleven en hierin alleen de benodigde functies uit de helpers file worden aangeroepen.

4. Ik heb besloten om gebruik te maken van de huidige tijd en deze te vergelijken met de tijden van de wedstrijden. Allereerst had ik een code die altijd alle requests aanvroeg per bet, wat de website heel erg traag maakte. Door de gebruik te maken van de huidige tijd, hoeft er geen request voor de resultaten worden gedaan als de wedstrijd nog niet is gespeeld. Daarnaast wordt op basis van de huidige tijd een afweging gemaakt of er wordt gekeken in de live-info data of in de history-data in plaats van allebei. Ondanks dat de site nog steeds traag kan zijn door de vele requests die worden gemaakt, is dit een grote verbetering ten opzichte van de eerdere situatie.